# 索引

==如果把数据库的所有数据比作是一本书的所有页，那么索引就是数据库这本书的目录.==







B+Tree

## MySQL的索引分类

### 单值索引

一个索引只包含单个列，一个表可以有多个单值索引。

#### 创建表时建索引

create table 表名(

.....

key [索引名] (字段名),

key [索引名] (字段名)

)

如果不写索引名，索引名就与字段名一致。



#### 单独建索引

create index 索引名 on 表名[字段]；





#### alter方式建索引



alter table 表名 add index [索引名] (字段);





### 唯一索引

==索引列的值必须唯一，但是允许有空值==



#### 创建表时创建索引



create table 表名(

.....

unique [索引名] (字段名),

unique [索引名] (字段名)

)

#### 单独建索引

create unique index 索引名 on 表名(字段);



#### alter方式建索引

alter table 表名 add unique index [索引] (字段)；







### 主键索引

==值唯一，但是不可以为null==



==如果主键是由多个字段构成，就成为复合主键==



#### 创建表时建主键

create table 表名(

....

primary key ([字段名],[字段名])

)





#### alter 方式创建索引

alter table 表名 add primary key (字段，字段)；



==主键索引和非主键索引的不同之出==

非主键索引的叶子节点存放的是主键的值，主键索引的叶子节点存放的是整行数据，其中非主键索引称为二级索引，主键索引称为聚簇索引。



### 复合索引

一个索引包含多个列



#### 创建表时创建索引

炽热奥特他不了 表名 (

......

key [索引名] (字段名，字段名，...)

)



#### 单独建索引

create index 索引名 on 表名(字段,字段,字段....);



#### alter 方式建索引

alter table 表名 add index [索引名] (字段,字段,字段....);



### 删除索引

#### 删除非主键索引

alter table 表名 drop index 索引名；



drop index 索引名 on 表名；



#### 删除主键索引

alter table 表名 drop primary key;





## 索引的创建时机



#### 适合创建索引的情况



1. 主键自动创建唯一索引
2. 频繁作为查询条件的字段应该创建索引
3. 查询中与其他表关联的字段，外键关系建立索引
4. 单键/组合索引的选择问题，组合索引性价比更高
5. 查询中排序的字段，排序字段若通过索引去访问将大大提高排序的速度
6. 查询中统计或者分组





#### 不适合创建索引的情况

1. 表记录太少
2. 经常增删改查的表或者字段
3. where条件里用不到的字段不创建索引
4. 过滤性不好的不适合建索引




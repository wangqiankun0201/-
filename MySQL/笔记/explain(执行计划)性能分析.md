# Explain(执行计划)性能分析

## 用法

Explain + SQL语句



## Explain中各个参数详解

### id

SQL语句的执行顺序

id越大，优先级越高，越先被查询

id相同，从上往下执行





### select_type

查询类型





### table

表



### type

表示MySQL在表中找到所需行的方式，又称“访问类型”

1. all：全表扫面
2. const：读常量，最多只会有一条记录匹配，由于是常量，实际上只需要读一次
3. eq_ref：最多只会有一条匹配结果，一般是通过主键或唯一键索引来访问
4. fulltext：进行全文索引检索
5. index：全索引扫描
6. index_merge：查询中同时使用两个（或多个）索引，然后对索引结果进行合并（merge)，再读取数据。
7. index_sebquery：子查询中的返回结果字段组合是一个索引（或索引组合），但不是一个主键或唯一索引
8. rang：索引范围扫描
9. ref：Join语句中被驱动表索引引用的查询
10. ref_of_null：与ref的唯一的区别就是在使用索引引用的查询之外再增加一个空值的查询
11. system：系统表，表中只有一行数据
12. unique_subquery：子查询中的返回结果字段组合是主键或唯一约束



### possible_keys

显示可能应用在这张表中的索引，一个或多个，查询涉及到的字段上若存在索引，则该索引将被列出，但不一定被查询实际应用



### key

实际使用的索引



### key_len

索引中使用的字节数



## 索引失效

### 一个索引失效



1. 使用like且在左边有“%”
2. 隐士类型转换，索引字段与条件或关联字段的类型不一致
3. 条件中对索引列使用运算或函数
4. 不可空索引使用is not null，仅当查询列只有该索引列时会使用索引
5. 使用or且存在非索引列
6. 使用 not in，in，is null，is not null，且返回值中不止包含条件索引列

  --部分情况下可以使用索引

​	当表里没有数据时不使用索引，当后面的条件查询的返回值大于等于总数据50%时不使用索引，少于50%使用索引

7. 使用非主键范围条件查询时，部分情况索引失效。

   --部分情况下可以使用索引

   当表里没有数据时不使用索引，当范围条件查询的返回值大于等于总数据的50%时不使用索引，少于50%时使用索引

8. 使用！=或<>,索引失效--可以使用索引，但是这里不是使用索引去查数据，而是去查索引键值，--即先根据该索引去查其他索引的值，再根据查出来的索引去查数据。

9. 表关联时，关联字段字符集不一致会导致索引失效

10. 表关联时，关联字段字符集排序规则不一致会导致索引失效



### 多个独立索引失效

1. 在使用or的时候，有一侧的索引失效，整个查询的索引失效

   可以使用union或者union all来替代



